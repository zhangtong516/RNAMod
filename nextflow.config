// Global default params
params {
    genome = "/home/users/astar/gis/zhangt/scratch/reference/mm39/STAR_v2.7.10a/"  //"mm39"
    gtf = "/home/users/astar/gis/zhangt/scratch/reference/mm39/mm39.ncbiRefSeq.gtf"
    outdir = "results"
}

// Process-specific configuration
process {
    // General process configuration
    executor = 'local'
    cpus = 8
    memory = '16 GB'
    time = '24h'

    withName: 'starAlign' {
        cpus = 12
        memory = '32 GB'
    }

    withName: 'bamCoverage' {
        cpus = 8
        memory = '24 GB'
    }

    withName: 'featureCounts' {
        cpus = 8
        memory = '16 GB'
    }
    
    withName: 'COLLECT_QC_METRICS' {
        cpus = 4
        memory = '8 GB'
    }
    
    withName: 'MACS2_PEAK_CALLING' {
        cpus = 8
        memory = '16 GB'
    }
    
    withName: 'PEAK_ANNOTATION' {
        cpus = 4
        memory = '16 GB'
    }
}

// Execution reports
report {
    enabled = true
    file = "${params.outdir}/execution_report.html"
}

timeline {
    enabled = true
    file = "${params.outdir}/timeline_report.html"
}

trace {
    enabled = true
    file = "${params.outdir}/trace.txt"
}

// Docker configuration
docker {
    enabled = true
    runOptions = '-u $(id -u):$(id -g)'
}

// Manifest
manifest {
    name = 'RNA Methylation Analysis Pipeline'
    author = 'Your Name'
    description = 'Nextflow pipeline for RNA methylation analysis'
    version = '1.0.0'
    nextflowVersion = '>=21.04.0'
}